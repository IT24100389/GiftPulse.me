<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>GiftPulse.me — Holiday Gifts & Recipes</title>
  <meta name="description" content="GiftPulse.me — curated Christmas gifts, wishes, recipe matcher & discount radar." />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;800&display=swap" rel="stylesheet">
  <style>
    :root{
      --bg-1:#071021;
      --bg-2:#0b1420;
      --card:#08121a;
      --muted:#9fb0bd;
      --text:#e7f3f0;
      --accent:#00e389;
      --glass: rgba(255,255,255,0.04);
      --glass-2: rgba(255,255,255,0.02);
      --radius:16px;
      --shadow: 0 10px 30px rgba(2,6,23,0.7);
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      min-height:100%;
      font-family:Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
      background:
        radial-gradient(1200px 600px at 10% 10%, rgba(0,200,120,0.03), transparent 12%),
        linear-gradient(180deg,var(--bg-1), var(--bg-2) 60%);
      color:var(--text);
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
      display:flex;
      flex-direction:column;
      align-items:center;
      padding:28px 18px;
      gap:18px;
    }
    /* header */
    header{
      width:100%;
      max-width:1100px;
      background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
      border-radius:20px;
      padding:14px 20px;
      display:flex;
      gap:16px;
      align-items:center;
      box-shadow:var(--shadow);
      border:1px solid rgba(255,255,255,0.04);
      backdrop-filter: blur(10px) saturate(120%);
    }
    .brand{display:flex; align-items:center; gap:12px}
    .logo{
      width:46px;height:46px;border-radius:12px;background:linear-gradient(135deg,#063a2d,var(--accent));display:grid;place-items:center;font-weight:800;color:#04251a;
      box-shadow: 0 6px 18px rgba(0,227,137,0.06);
    }
    .brand h1{font-size:18px;margin:0}
    nav{margin-left:auto; display:flex; gap:10px; align-items:center}
    nav button{
      background:transparent;border:none;color:var(--muted);padding:8px 12px;border-radius:10px;cursor:pointer;font-weight:600;
      transition: all .22s ease;
    }
    nav button:hover{color:var(--text); transform:translateY(-2px)}
    nav button.active{color:var(--accent); background:linear-gradient(90deg, rgba(0,227,137,0.05), rgba(0,227,137,0.03)); border:1px solid rgba(0,227,137,0.06)}
    main{width:100%; max-width:1100px; display:block}
    /* page container */
    .page{display:none}
    .page.active{display:block; animation:pageFade .36s ease both}
    @keyframes pageFade{from{opacity:0;transform:translateY(6px)} to{opacity:1;transform:none}}
    /* hero */
    .hero{
      display:grid;
      grid-template-columns:1fr 420px;
      gap:20px;
      background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
      padding:22px;border-radius:20px;border:1px solid rgba(255,255,255,0.03);
      box-shadow:0 10px 40px rgba(2,6,23,0.6);
      backdrop-filter: blur(8px);
    }
    .hero h2{margin:8px 0 10px;font-size:26px;line-height:1.1}
    .lead{color:var(--muted); margin-bottom:14px; max-width:52ch}
    .features{display:flex;gap:10px}
    .feature{flex:1;padding:12px;border-radius:12px;background:linear-gradient(180deg, rgba(255,255,255,0.01), transparent);border:1px solid rgba(255,255,255,0.02);color:var(--muted)}
    .hero-card{border-radius:14px;overflow:hidden;border:1px solid rgba(255,255,255,0.03); padding:12px; background:linear-gradient(180deg, rgba(255,255,255,0.015), rgba(255,255,255,0.01))}
    .cta-grid{display:flex;flex-direction:column; gap:10px; margin-top:8px}
    .btn{padding:10px 14px;border-radius:12px;border:none;cursor:pointer;font-weight:700}
    .btn.primary{background:linear-gradient(90deg,var(--accent), #51f6a9); color:#04221a; box-shadow:0 6px 24px rgba(0,227,137,0.12)}
    .btn.ghost{background:transparent;border:1px solid rgba(255,255,255,0.04); color:var(--muted)}
    /* grid base */
    .card{background:linear-gradient(180deg,var(--card), rgba(255,255,255,0.01)); border-radius:14px; padding:14px; border:1px solid rgba(255,255,255,0.03); box-shadow:var(--shadow)}
    .small{font-size:13px;color:var(--muted)}
    /* Gifts page */
    .controls{display:flex; gap:12px; align-items:center; margin-bottom:14px; flex-wrap:wrap}
    .search{flex:1}
    input[type="text"], select{width:100%; padding:10px 12px; border-radius:10px; background:transparent; border:1px solid rgba(255,255,255,0.04); color:var(--text)}
    .chips{display:flex; gap:8px; flex-wrap:wrap}
    .chip{padding:8px 12px;border-radius:999px;background:linear-gradient(180deg, rgba(255,255,255,0.01), transparent); border:1px solid rgba(255,255,255,0.02); cursor:pointer;color:var(--muted)}
    .chip.active{border-color:var(--accent); color:var(--accent); box-shadow:0 6px 18px rgba(0,227,137,0.03)}
    .grid{display:grid; grid-template-columns:repeat(3,1fr); gap:12px}
    .product{display:flex; gap:12px; align-items:center; padding:12px; border-radius:12px}
    .product img{width:96px;height:96px;border-radius:10px; object-fit:cover;flex-shrink:0}
    .meta{flex:1}
    .price{font-weight:800;color:#dfeff8}
    .affiliate{margin-top:10px; display:flex; gap:8px}
    .affiliate a{ text-decoration:none; padding:8px 10px;border-radius:10px;font-weight:700 }
    /* wishes */
    .wish-grid{display:grid; grid-template-columns:repeat(2,1fr); gap:12px}
    .wish-card{padding:12px;border-radius:12px}
    .wish-card img{width:100%;height:120px;object-fit:cover;border-radius:10px;margin-bottom:10px;}
    /* recipes */
    .ingredients{display:flex; gap:10px; flex-wrap:wrap; margin:12px 0}
    .ingredient{padding:8px 12px;border-radius:999px;border:1px solid rgba(255,255,255,0.04); cursor:pointer;color:var(--muted)}
    .ingredient.active{background:rgba(0,227,137,0.08); border-color:var(--accent); color:var(--text)}
    .recipe-list{display:grid; grid-template-columns:repeat(2,1fr); gap:12px}
    .recipe{padding:12px;border-radius:12px}
    .recipe img{width:100%;height:120px;object-fit:cover;border-radius:10px;margin-bottom:10px;}
    .match-good{border-left:4px solid #10b981;padding-left:10px}
    .match-miss{border-left:4px solid #f59e0b;padding-left:10px}
    .match-none{opacity:0.6}
    /* discounts */
    .discount-grid{display:grid; grid-template-columns:repeat(3,1fr); gap:12px}
    .discount{padding:12px;border-radius:12px}
    .discount img{width:100%;height:160px;object-fit:cover;border-radius:10px}
    /* recipe match styles */
    .recipe .small span.match{color:var(--accent); font-weight:600}
    /* responsive */
    @media (max-width:1000px){
      .hero{grid-template-columns:1fr}
      .grid, .discount-grid{grid-template-columns:repeat(2,1fr)}
      .recipe-list{grid-template-columns:1fr}
    }
    @media (max-width:600px){
      header{padding:10px}
      nav button{padding:8px}
      .grid{grid-template-columns:1fr}
      .discount-grid{grid-template-columns:1fr}
      .wish-grid{grid-template-columns:1fr}
    }
    /* subtle animations */
    .fade-in{opacity:0; transform:translateY(8px); animation:fadeIn .6s forwards}
    @keyframes fadeIn{to{opacity:1; transform:none}}
    /* accessibility focus */
    button:focus, a:focus, input:focus{outline:2px solid rgba(0,227,137,0.14); outline-offset:2px}
  </style>
</head>
<body>
  <header>
    <div class="brand">
      <div class="logo">GP</div>
      <div>
        <h1 style="margin:0;font-size:16px">GiftPulse.me</h1>
        <div style="font-size:12px;color:var(--muted)">Holiday gifts & recipes</div>
      </div>
    </div>
    <nav aria-label="Primary">
      <button class="nav-btn active" data-target="home">Home</button>
      <button class="nav-btn" data-target="gifts">Gifts</button>
      <button class="nav-btn" data-target="wishes">Wishes</button>
      <button class="nav-btn" data-target="recipes">Recipes</button>
      <button class="nav-btn" data-target="discounts">Discounts</button>
    </nav>
  </header>
  <main>
    <!-- HOME -->
    <section id="home" class="page active">
      <div class="hero card fade-in">
        <div>
          <h2>Find perfect holiday gifts, wishes & recipes — beautifully.</h2>
          <p class="lead">A lightweight site concept with filtering, affiliate gift lists, personalized wishes, recipe matching and a discount radar. Built with clean interactions and subtle animations.</p>
          <div class="features" aria-hidden="true">
            <div class="feature"><strong>Top 20 Gifts</strong><div class="small">Curated & affiliate-ready — filter by categories.</div></div>
            <div class="feature"><strong>Wishes & Messages</strong><div class="small">One-click copy messages for family & friends.</div></div>
            <div class="feature"><strong>Recipe Matcher</strong><div class="small">Check ingredients you have — see reachable recipes.</div></div>
          </div>
          <div class="cta-grid" style="margin-top:14px">
            <div style="display:flex; gap:10px; flex-wrap:wrap">
              <button class="btn primary" data-nav="gifts">Browse Gifts</button>
              <button class="btn ghost" data-nav="recipes">Try Recipe Matcher</button>
              <button class="btn ghost" data-nav="wishes">Get Wishes</button>
            </div>
          </div>
        </div>
        <div class="hero-card">
          <img src="https://media.istockphoto.com/id/1170760486/photo/homemade-hot-chocolate-mug-with-red-and-white-candy-cane-on-rustic-wooden-christmas-table.jpg?s=612x612&w=0&k=20&c=s7azST0GLthuFj3iFgl3XnPi-aTUUyFbUUSHqw7rhLc=" alt="Holiday gifts and hot chocolate" style="width:100%;border-radius:10px;display:block">
        </div>
      </div>
      <div style="margin-top:18px" class="card fade-in">
        <h3 style="margin:0 0 8px 0">Quick actions</h3>
        <div style="display:flex; gap:12px; align-items:center; flex-wrap:wrap; margin-top:8px">
          <button class="btn primary" data-nav="gifts">Browse Gifts</button>
          <button class="btn ghost" data-nav="recipes">Try Recipe Matcher</button>
          <button class="btn ghost" data-nav="wishes">Get Wishes</button>
        </div>
      </div>
    </section>
    <!-- GIFTS -->
    <section id="gifts" class="page card">
      <div style="display:flex; justify-content:space-between; align-items:center; gap:12px; flex-wrap:wrap">
        <div style="flex:1; min-width:220px">
          <h2 style="margin:0 0 6px 0">Top 20 Gifts — affiliate-ready</h2>
          <div class="small">Filter by category, search by name and sort by popularity or price.</div>
        </div>
        <div style="display:flex; gap:12px; align-items:center">
          <input id="gift-search" type="text" placeholder="Search gifts (e.g. 'headphones')" aria-label="Search gifts" style="min-width:240px">
          <select id="sort-gifts" aria-label="Sort gifts" style="min-width:160px">
            <option value="popular">Sort: Popular</option>
            <option value="price-asc">Price: Low → High</option>
            <option value="price-desc">Price: High → Low</option>
          </select>
        </div>
      </div>
      <div style="margin-top:12px" class="chips" id="gift-categories" role="toolbar" aria-label="Gift categories"></div>
      <div style="margin-top:12px" id="gift-grid" class="grid"></div>
    </section>
    <!-- WISHES -->
    <section id="wishes" class="page card">
      <div style="display:flex; justify-content:space-between; align-items:center; gap:12px; flex-wrap:wrap">
        <div>
          <h2 style="margin:0 0 6px 0">Wishes & Messages</h2>
          <div class="small">Choose a recipient to view curated messages — copy in one click.</div>
        </div>
        <div id="wish-cats" class="chips" role="toolbar" aria-label="Wish categories"></div>
      </div>
      <div style="margin-top:12px" id="wish-list" class="wish-grid"></div>
    </section>
    <!-- RECIPES -->
    <section id="recipes" class="page card">
      <h2 style="margin:0 0 8px 0">Recipe Matcher</h2>
      <div class="small">Tick the ingredients you have — we'll show recipes you can make or get close to.</div>
      <div id="ingredient-panel" class="ingredients" aria-label="Ingredients"></div>
      <div id="recipe-list" class="recipe-list" style="margin-top:12px"></div>
    </section>
    <!-- DISCOUNTS -->
    <section id="discounts" class="page card">
      <h2 style="margin:0 0 8px 0">Discountable & Valuable Finds</h2>
      <div class="small">Items with strong discounts and high value for holiday shopping.</div>
      <div id="discount-grid" class="discount-grid" style="margin-top:12px"></div>
    </section>
  </main>
  <footer style="width:100%; max-width:1100px; text-align:center; color:var(--muted); font-size:13px; margin-top:6px">
    Built with ❤️ — prototype UI. Replace affiliate placeholders with your affiliate links.
  </footer>
  <script>
    document.addEventListener('DOMContentLoaded', () => {
      /* ---------------- sample data ---------------- */
      const gifts = [
        {id:1,title:'Cozy Wool Scarf',cat:'clothing',price:29, img:'https://img.freepik.com/free-photo/assortment-gifts-christmas-items_23-2148343287.jpg?semt=ais_hybrid&w=740&q=80',aff:'https://example.com/aff?item=1',pop:90},
        {id:2,title:'Bluetooth Headphones',cat:'electronics',price:89,img:'https://images.unsplash.com/photo-1518444024645-7f5c4c7c3f6d?auto=format&fit=crop&w=600&q=70',aff:'https://example.com/aff?item=2',pop:120},
        {id:3,title:'Hand-painted Ornament Set',cat:'decoration',price:19,img:'https://images.unsplash.com/photo-1549187774-b4e9b0445b6d?auto=format&fit=crop&w=600&q=70',aff:'https://example.com/aff?item=3',pop:70},
        {id:4,title:'Retro Game Console',cat:'gaming',price:129,img:'https://images.unsplash.com/photo-1606813903254-535a3b5c9e1d?auto=format&fit=crop&w=600&q=70',aff:'https://example.com/aff?item=4',pop:110},
        {id:5,title:'Guitar Starter Pack',cat:'music',price:149,img:'https://images.unsplash.com/photo-1511379938547-c1f69419868d?auto=format&fit=crop&w=600&q=70',aff:'https://example.com/aff?item=5',pop:95},
        {id:6,title:'Festive Candle Trio',cat:'home',price:24,img:'https://images.unsplash.com/photo-1519681393784-d120267933ba?auto=format&fit=crop&w=600&q=70',aff:'https://example.com/aff?item=6',pop:65},
        {id:7,title:'Leather Wallet',cat:'accessories',price:39,img:'https://images.unsplash.com/photo-1520975914675-6fedd9b9a1b9?auto=format&fit=crop&w=600&q=70',aff:'https://example.com/aff?item=7',pop:88},
        {id:8,title:'Kids Plush Toy',cat:'toys',price:22,img:'https://images.unsplash.com/photo-1543785734-4e7a7f5b5b2b?auto=format&fit=crop&w=600&q=70',aff:'https://example.com/aff?item=8',pop:140},
        {id:9,title:'Custom Photo Frame',cat:'decoration',price:34,img:'https://images.unsplash.com/photo-1505691723518-36a94f1f0b6b?auto=format&fit=crop&w=600&q=70',aff:'https://example.com/aff?item=9',pop:50},
        {id:10,title:'Warm Winter Boots',cat:'shoes',price:99,img:'https://images.unsplash.com/photo-1542291026-7eec264c27ff?auto=format&fit=crop&w=600&q=70',aff:'https://example.com/aff?item=10',pop:105},
        {id:11,title:'Novel Bestseller',cat:'books',price:16,img:'https://images.unsplash.com/photo-1512820790803-83ca734da794?auto=format&fit=crop&w=600&q=70',aff:'https://example.com/aff?item=11',pop:47},
        {id:12,title:'Coffee Gift Set',cat:'food',price:46,img:'https://images.unsplash.com/photo-1485459726513-55c8bd6f7b3b?auto=format&fit=crop&w=600&q=70',aff:'https://example.com/aff?item=12',pop:96},
        {id:13,title:'Fitness Tracker',cat:'electronics',price:79,img:'https://images.unsplash.com/photo-1519861531924-1e3b1d3af5f6?auto=format&fit=crop&w=600&q=70',aff:'https://example.com/aff?item=13',pop:101},
        {id:14,title:'Christmas Sweater',cat:'clothing',price:34,img:'https://images.unsplash.com/photo-1542407762-9e9f1b7b34d4?auto=format&fit=crop&w=600&q=70',aff:'https://example.com/aff?item=14',pop:84},
        {id:15,title:'Cap & Beanie Combo',cat:'accessories',price:26,img:'https://images.unsplash.com/photo-1519741491850-17c3e7c8b9c1?auto=format&fit=crop&w=600&q=70',aff:'https://example.com/aff?item=15',pop:60},
        {id:16,title:'Board Game Classic',cat:'gaming',price:49,img:'https://images.unsplash.com/photo-1527920341687-3a2b6ae7b3b2?auto=format&fit=crop&w=600&q=70',aff:'https://example.com/aff?item=16',pop:130},
        {id:17,title:'Kitchen Mixer',cat:'home',price:199,img:'https://images.unsplash.com/photo-1541534401786-6c2b0fda6cbc?auto=format&fit=crop&w=600&q=70',aff:'https://example.com/aff?item=17',pop:55},
        {id:18,title:'Smart Light Kit',cat:'electronics',price:59,img:'https://images.unsplash.com/photo-1496180727794-817822f65950?auto=format&fit=crop&w=600&q=70',aff:'https://example.com/aff?item=18',pop:99},
        {id:19,title:'Scented Diffuser',cat:'home',price:33,img:'https://images.unsplash.com/photo-1496284045406-d5c76b1f0f0d?auto=format&fit=crop&w=600&q=70',aff:'https://example.com/aff?item=19',pop:48},
        {id:20,title:'Stainless Travel Mug',cat:'accessories',price:21,img:'https://images.unsplash.com/photo-1517685352821-92cf88aee5a5?auto=format&fit=crop&w=600&q=70',aff:'https://example.com/aff?item=20',pop:76}
      ];
      const wishData = {
        mom:[
          "Mom, your love is my comfort — Merry Christmas!",
          "Wishing you a cozy holiday filled with warm hugs and cocoa."
        ],
        dad:[
          "Dad, thanks for being my rock. Merry Christmas!",
          "May your holiday be peaceful and joyful."
        ],
        brother:[
          "Bro — let's make this Christmas legendary!",
          "To my brother: teammate, friend — happy holidays."
        ],
        sister:[
          "Sis, your smile lights the season. Merry Christmas!",
          "May your season sparkle as you do."
        ],
        friend:[
          "So glad to have you this year — happy holidays!",
          "Wishing you laughter, warmth and great memories."
        ],
        colleague:[
          "Wishing you a restful holiday and a successful new year!",
          "Thanks for the teamwork — happy holidays!"
        ]
      };
      const ingredients = ['flour','sugar','butter','eggs','milk','chicken','potato','cinnamon','ginger','garlic','onion','cheese','tomato','basil','buttermilk','chocolate','yeast'];
      const recipes = [
        {id:'r1',title:'Classic Gingerbread Cookies',ing:['flour','sugar','butter','eggs','cinnamon','ginger']},
        {id:'r2',title:'Roast Chicken with Herbs',ing:['chicken','garlic','onion','butter']},
        {id:'r3',title:'Creamy Mashed Potato',ing:['potato','butter','milk']},
        {id:'r4',title:'Tomato Basil Pasta',ing:['tomato','basil','garlic','cheese']},
        {id:'r5',title:'Christmas Custard',ing:['milk','eggs','sugar']},
        {id:'r6',title:'Chocolate Yule Log',ing:['chocolate','butter','eggs','sugar']},
        {id:'r7',title:'Cinnamon Rolls',ing:['flour','yeast','butter','milk','sugar']},
      ];
      const discounts = [
        {id:4, title:'Retro Game Console', price:129, discount:25, tag:'gaming', img:'https://images.unsplash.com/photo-1606813903254-535a3b5c9e1d?auto=format&fit=crop&w=800&q=80'},
        {id:17, title:'Kitchen Mixer', price:199, discount:30, tag:'home', img:'https://images.unsplash.com/photo-1541534401786-6c2b0fda6cbc?auto=format&fit=crop&w=800&q=80'},
        {id:2, title:'Bluetooth Headphones', price:89, discount:15, tag:'electronics', img:'https://images.unsplash.com/photo-1518444024645-7f5c4c7c3f6d?auto=format&fit=crop&w=800&q=80'},
        {id:10, title:'Warm Winter Boots', price:99, discount:40, tag:'clothing', img:'https://images.unsplash.com/photo-1542291026-7eec264c27ff?auto=format&fit=crop&w=800&q=80'},
        {id:5, title:'Guitar Starter Pack', price:149, discount:20, tag:'music', img:'https://images.unsplash.com/photo-1511379938547-c1f69419868d?auto=format&fit=crop&w=800&q=80'},
        {id:16, title:'Board Game Classic', price:49, discount:10, tag:'gaming', img:'https://images.unsplash.com/photo-1527920341687-3a2b6ae7b3b2?auto=format&fit=crop&w=800&q=80'}
      ];
      /* -------------- utilities -------------- */
      const $ = s => document.querySelector(s);
      const $$ = s => Array.from(document.querySelectorAll(s));
      function escapeHtml(str) {
        return str.replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;').replace(/"/g, '&quot;').replace(/'/g, '&#039;');
      }
      function escapeForJs(str) {
        return str.replace(/\\/g, '\\\\').replace(/'/g, "\\'").replace(/"/g, '\\"').replace(/\n/g, '\\n');
      }
      function capitalize(str) {
        return str.charAt(0).toUpperCase() + str.slice(1);
      }
      function copyText(text) {
        navigator.clipboard.writeText(text).then(() => alert('Copied to clipboard!'));
      }
      function shareText(text) {
        if (navigator.share) {
          navigator.share({ text }).catch(console.error);
        } else {
          alert('Share not supported on this browser.');
        }
      }
      /* -------------- navigation -------------- */
      function showPage(id){
        $$('.nav-btn').forEach(b => b.classList.toggle('active', b.dataset.target === id));
        $$('.page').forEach(p => p.classList.toggle('active', p.id === id));
        window.scrollTo({top:0, behavior:'smooth'});
      }
      $$('.nav-btn').forEach(b => b.addEventListener('click', () => showPage(b.dataset.target)));
      // quick action nav
      $$('[data-nav]').forEach(b => b.addEventListener('click', (e) => {
        const target = e.currentTarget.dataset.nav || e.currentTarget.getAttribute('data-nav');
        if(target) showPage(target);
      }));
      /* -------------- gifts UI -------------- */
      const categories = ['all', ...Array.from(new Set(gifts.map(g=>g.cat)))];
      function buildCategoryChips(){
        const wrap = $('#gift-categories'); wrap.innerHTML='';
        categories.forEach((c, i) => {
          const chip = document.createElement('div'); chip.className='chip'+(c==='all'?' active':''); chip.tabIndex=0;
          chip.textContent = c === 'all' ? 'All' : (c[0].toUpperCase() + c.slice(1));
          chip.dataset.cat = c;
          chip.addEventListener('click', () => { $$('.chip').forEach(x=>x.classList.remove('active')); chip.classList.add('active'); renderGifts(); });
          chip.addEventListener('keydown', (ev)=>{ if(ev.key==='Enter') chip.click(); });
          wrap.appendChild(chip);
        });
      }
      function renderGifts(){
        const grid = $('#gift-grid'); grid.innerHTML='';
        const q = $('#gift-search').value.trim().toLowerCase();
        const activeCat = $$('.chip').find(c => c.classList.contains('active'))?.dataset.cat || 'all';
        let list = gifts.filter(g => (activeCat==='all' || g.cat===activeCat) && (g.title.toLowerCase().includes(q) || g.cat.includes(q)));
        const sort = $('#sort-gifts').value;
        if(sort === 'price-asc') list.sort((a,b)=>a.price-b.price);
        else if(sort === 'price-desc') list.sort((a,b)=>b.price-a.price);
        else list.sort((a,b)=>b.pop - a.pop);
        list.forEach(item => {
          const el = document.createElement('div'); el.className='product card fade-in';
          el.innerHTML = `
            <img src="${item.img}" alt="${escapeHtml(item.title)}">
            <div class="meta">
              <div style="display:flex; justify-content:space-between; align-items:flex-start; gap:8px">
                <div>
                  <strong>${escapeHtml(item.title)}</strong>
                  <div class="small">Category: ${escapeHtml(item.cat)}</div>
                </div>
                <div style="text-align:right">
                  <div class="price">$${item.price}</div>
                  <div class="small">pop ${item.pop}</div>
                </div>
              </div>
              <div class="affiliate" role="group" aria-label="affiliate actions">
                <a class="btn primary" href="${item.aff}" target="_blank" rel="noopener">Buy (affiliate)</a>
                <button class="btn ghost" onclick="copyText('${escapeForJs(item.aff)}')">Copy Link</button>
              </div>
            </div>
          `;
          grid.appendChild(el);
        });
        if(list.length === 0){
          grid.innerHTML = `<div style="padding:20px;color:var(--muted)">No gifts found for that search/filter.</div>`;
        }
      }
      /* -------------- wishes UI -------------- */
      function buildWishes(){
        const wrap = $('#wish-cats'); wrap.innerHTML='';
        Object.keys(wishData).forEach((k, i) => {
          const chip = document.createElement('div'); chip.className = 'chip' + (i===0 ? ' active' : '');
          chip.textContent = capitalize(k);
          chip.dataset.key = k;
          chip.tabIndex=0;
          chip.addEventListener('click', () => {
            $$('#wish-cats .chip').forEach(x=>x.classList.remove('active'));
            chip.classList.add('active');
            renderWishes(k);
          });
          chip.addEventListener('keydown', (ev)=>{ if(ev.key==='Enter') chip.click(); });
          wrap.appendChild(chip);
        });
        // initial
        renderWishes(Object.keys(wishData)[0]);
      }
      function renderWishes(key){
        const list = $('#wish-list'); list.innerHTML='';
        (wishData[key] || []).forEach(w => {
          const div = document.createElement('div'); div.className = 'wish-card card fade-in';
          div.innerHTML = `
            <img src="https://i.pinimg.com/736x/0d/3e/5d/0d3e5dc9aa68393d506c8e28dec2a11c.jpg" alt="Christmas wish for ${capitalize(key)}">
            <div style="display:flex;justify-content:space-between;align-items:flex-start">
            <div><strong>${capitalize(key)}</strong><p class="small" style="margin:6px 0 0 0">${escapeHtml(w)}</p></div>
            <div style="display:flex;flex-direction:column;gap:8px">
              <button class="btn primary" onclick="copyText('${escapeForJs(w)}')">Copy</button>
              <button class="btn ghost" onclick="shareText('${escapeForJs(w)}')">Share</button>
            </div>
          </div>`;
          list.appendChild(div);
        });
      }
      /* -------------- recipes UI -------------- */
      function buildIngredients(){
        const wrap = $('#ingredient-panel');
        wrap.innerHTML = '';
        ingredients.forEach(ing => {
          const div = document.createElement('div');
          div.className = 'ingredient';
          div.textContent = capitalize(ing);
          div.dataset.ing = ing;
          div.tabIndex = 0;
          div.addEventListener('click', () => {
            div.classList.toggle('active');
            renderRecipes();
          });
          div.addEventListener('keydown', (ev) => {
            if (ev.key === 'Enter') div.click();
          });
          wrap.appendChild(div);
        });
      }
      function renderRecipes(){
        const list = $('#recipe-list');
        list.innerHTML = '';
        const selected = $$('.ingredient.active').map(d => d.dataset.ing);
        recipes.forEach(rec => {
          const matched = rec.ing.filter(i => selected.includes(i)).length;
          const total = rec.ing.length;
          let cls = 'recipe card fade-in';
          if (matched === total && total > 0) cls += ' match-good';
          else if (matched > 0) cls += ' match-miss';
          else cls += ' match-none';
          const div = document.createElement('div');
          div.className = cls;
          const ingList = rec.ing.map(i => `<span class="${selected.includes(i) ? 'match' : ''}">${capitalize(i)}</span>`).join(', ');
          div.innerHTML = `
            <img src="https://img.freepik.com/free-photo/baked-turkey-christmas-dinner-christmas-table-is-served-with-turkey-decorated-with-bright-tinsel-candles-fried-chicken-table-family-dinner-top-view_2829-6078.jpg?semt=ais_hybrid&w=740&q=80" alt="${escapeHtml(rec.title)}">
            <strong>${escapeHtml(rec.title)}</strong>
            <div class="small">Ingredients: ${ingList}</div>
          `;
          list.appendChild(div);
        });
      }
      /* -------------- discounts UI -------------- */
      function renderDiscounts(){
        const grid = $('#discount-grid');
        grid.innerHTML = '';
        discounts.forEach(d => {
          const div = document.createElement('div');
          div.className = 'discount card fade-in';
          div.innerHTML = `
            <img src="${d.img}" alt="${escapeHtml(d.title)}">
            <div style="margin-top:10px">
              <strong>${escapeHtml(d.title)}</strong>
              <span class="price">$${d.price}</span>
              <span style="color:var(--accent)">-${d.discount}%</span>
            </div>
            <div class="small">Tag: ${capitalize(d.tag)}</div>
            <div style="margin-top:10px">
              <a class="btn primary" href="${gifts.find(g => g.id === d.id)?.aff || '#'}" target="_blank" rel="noopener">Shop Now</a>
            </div>
          `;
          grid.appendChild(div);
        });
      }
      /* -------------- init -------------- */
      buildCategoryChips();
      renderGifts();
      $('#gift-search').addEventListener('input', renderGifts);
      $('#sort-gifts').addEventListener('change', renderGifts);
      buildWishes();
      buildIngredients();
      renderRecipes();
      renderDiscounts();
    });
  </script>
</body>
</html>
